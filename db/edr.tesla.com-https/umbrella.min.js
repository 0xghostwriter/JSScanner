function ajax(t,e,n,r){n=n||function(){},(e=e||{}).body=e.body||{},e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{},e.headers["X-Requested-With"]=e.headers["X-Requested-With"]||"XMLHttpRequest",void 0!==window.FormData&&e.body instanceof window.FormData||(e.headers["Content-Type"]=e.headers["Content-Type"]||"application/x-www-form-urlencoded"),/json/.test(e.headers["Content-Type"])&&(e.body=JSON.stringify(e.body)),"object"!=typeof e.body||e.body instanceof window.FormData||(e.body=u().param(e.body));var o=new window.XMLHttpRequest;for(var i in u(o).on("error timeout abort",function(){n(new Error,null,o)}).on("load",function(){var t=/^(4|5)/.test(o.status)?new Error(o.status):null,e=parseJson(o.response)||o.response;return n(t,e,o)}),o.open(e.method,t),e.headers)o.setRequestHeader(i,e.headers[i]);return r&&r(o),o.send(e.body),o}function parseJson(t){try{var e=JSON.parse(t);if(e&&"object"==typeof e)return e}catch(t){}return!1}var u=function(t,e){return this instanceof u?t instanceof u?t:("string"==typeof t&&(t=this.select(t,e)),t&&t.nodeName&&(t=[t]),void(this.nodes=this.slice(t))):new u(t,e)};u.prototype={get length(){return this.nodes.length}},u.prototype.nodes=[],u.prototype.addClass=function(){return this.eacharg(arguments,function(t,e){t.classList.add(e)})},u.prototype.adjacent=function(t,e,n){return"number"==typeof e&&(e=0===e?[]:new Array(e).join().split(",").map(Number.call,Number)),this.each(function(r,o){var i=document.createDocumentFragment();u(e||{}).map(function(e,n){var i="function"==typeof t?t.call(this,e,n,r,o):t;return"string"==typeof i?this.generate(i):u(i)}).each(function(t){this.isInPage(t)?i.appendChild(u(t).clone().first()):i.appendChild(t)}),n.call(this,r,i)})},u.prototype.after=function(t,e){return this.adjacent(t,e,function(t,e){t.parentNode.insertBefore(e,t.nextSibling)})},u.prototype.ajax=function(t,e){return this.handle("submit",function(n){ajax(u(this).attr("action"),{body:u(this).serialize(),method:u(this).attr("method")},t&&t.bind(this),e&&e.bind(this))})},u.prototype.append=function(t,e){return this.adjacent(t,e,function(t,e){t.appendChild(e)})},u.prototype.args=function(t,e,n){return"function"==typeof t&&(t=t(e,n)),"string"!=typeof t&&(t=this.slice(t).map(this.str(e,n))),t.toString().split(/[\s,]+/).filter(function(t){return t.length})},u.prototype.array=function(t){t=t;var e=this;return this.nodes.reduce(function(n,r,o){var i;return t?((i=t.call(e,r,o))||(i=!1),"string"==typeof i&&(i=u(i)),i instanceof u&&(i=i.nodes)):i=r.innerHTML,n.concat(!1!==i?i:[])},[])},u.prototype.attr=function(t,e,n){if(n=n?"data-":"",void 0!==e){var r=t;(t={})[r]=e}return"object"==typeof t?this.each(function(e){for(var r in t)e.setAttribute(n+r,t[r])}):this.length?this.first().getAttribute(n+t):""},u.prototype.before=function(t,e){return this.adjacent(t,e,function(t,e){t.parentNode.insertBefore(e,t)})},u.prototype.children=function(t){return this.map(function(t){return this.slice(t.children)}).filter(t)},u.prototype.clone=function(){return this.map(function(t,e){var n=t.cloneNode(!0),r=this.getAll(n);return this.getAll(t).each(function(t,e){for(var n in this.mirror)this.mirror[n](t,r.nodes[e])}),n})},u.prototype.getAll=function(t){return u([t].concat(u("*",t).nodes))},u.prototype.mirror={},u.prototype.mirror.events=function(t,e){if(t._e)for(var n in t._e)t._e[n].forEach(function(t){u(e).on(n,t)})},u.prototype.mirror.select=function(t,e){u(t).is("select")&&(e.value=t.value)},u.prototype.mirror.textarea=function(t,e){u(t).is("textarea")&&(e.value=t.value)},u.prototype.closest=function(t){return this.map(function(e){do{if(u(e).is(t))return e}while((e=e.parentNode)&&e!==document)})},u.prototype.data=function(t,e){return this.attr(t,e,!0)},u.prototype.each=function(t){return this.nodes.forEach(t.bind(this)),this},u.prototype.eacharg=function(t,e){return this.each(function(n,r){this.args(t,n,r).forEach(function(t){e.call(this,n,t)},this)})},u.prototype.empty=function(){return this.each(function(t){for(;t.firstChild;)t.removeChild(t.firstChild)})},u.prototype.filter=function(t){var e=function(e){return e.matches=e.matches||e.msMatchesSelector||e.webkitMatchesSelector,e.matches(t||"*")};return"function"==typeof t&&(e=t),t instanceof u&&(e=function(e){return-1!==t.nodes.indexOf(e)}),u(this.nodes.filter(e))},u.prototype.find=function(t){return this.map(function(e){return u(t||"*",e)})},u.prototype.first=function(){return this.nodes[0]||!1},u.prototype.generate=function(t){return/^\s*<t(h|r|d)/.test(t)?u(document.createElement("table")).html(t).children().nodes:/^\s*</.test(t)?u(document.createElement("div")).html(t).children().nodes:document.createTextNode(t)},u.prototype.handle=function(){var t=this.slice(arguments).map(function(t){return"function"==typeof t?function(e){e.preventDefault(),t.apply(this,arguments)}:t},this);return this.on.apply(this,t)},u.prototype.hasClass=function(){return this.is("."+this.args(arguments).join("."))},u.prototype.html=function(t){return void 0===t?this.first().innerHTML||"":this.each(function(e){e.innerHTML=t})},u.prototype.is=function(t){return this.filter(t).length>0},u.prototype.isInPage=function(t){return t!==document.body&&document.body.contains(t)},u.prototype.last=function(){return this.nodes[this.length-1]||!1},u.prototype.map=function(t){return t?u(this.array(t)).unique():this},u.prototype.not=function(t){return this.filter(function(e){return!u(e).is(t||!0)})},u.prototype.off=function(t){return this.eacharg(t,function(t,e){u(t._e?t._e[e]:[]).each(function(n){t.removeEventListener(e,n)})})},u.prototype.on=function(t,e,n){if("string"==typeof e){var r=e;e=function(t){var e=arguments;u(t.currentTarget).find(r).each(function(r){if(r===t.target||r.contains(t.target)){try{Object.defineProperty(t,"currentTarget",{get:function(){return r}})}catch(t){}n.apply(r,e)}})}}var o=function(t){return e.apply(this,[t].concat(t.detail||[]))};return this.eacharg(t,function(t,e){t.addEventListener(e,o),t._e=t._e||{},t._e[e]=t._e[e]||[],t._e[e].push(o)})},u.prototype.param=function(t){return Object.keys(t).map(function(e){return this.uri(e)+"="+this.uri(t[e])}.bind(this)).join("&")},u.prototype.parent=function(t){return this.map(function(t){return t.parentNode}).filter(t)},u.prototype.prepend=function(t,e){return this.adjacent(t,e,function(t,e){t.insertBefore(e,t.firstChild)})},u.prototype.remove=function(){return this.each(function(t){t.parentNode.removeChild(t)})},u.prototype.removeClass=function(){return this.eacharg(arguments,function(t,e){t.classList.remove(e)})},u.prototype.replace=function(t,e){var n=[];return this.adjacent(t,e,function(t,e){n=n.concat(this.slice(e.children)),t.parentNode.replaceChild(e,t)}),u(n)},u.prototype.scroll=function(){return this.first().scrollIntoView({behavior:"smooth"}),this},u.prototype.select=function(t,e){if(t=t.replace(/^\s*/,"").replace(/\s*$/,""),e)return this.select.byCss(t,e);for(var n in this.selectors)if(e=n.split("/"),new RegExp(e[1],e[2]).test(t))return this.selectors[n](t);return this.select.byCss(t)},u.prototype.select.byCss=function(t,e){return(e||document).querySelectorAll(t)},u.prototype.selectors={},u.prototype.selectors[/^\.[\w\-]+$/]=function(t){return document.getElementsByClassName(t.substring(1))},u.prototype.selectors[/^\w+$/]=function(t){return document.getElementsByTagName(t)},u.prototype.selectors[/^\#[\w\-]+$/]=function(t){return document.getElementById(t.substring(1))},u.prototype.selectors[/^</]=function(t){return u().generate(t)},u.prototype.serialize=function(){var t=this;return this.slice(this.first().elements).reduce(function(e,n){return!n.name||n.disabled||"file"===n.type?e:/(checkbox|radio)/.test(n.type)&&!n.checked?e:"select-multiple"===n.type?(u(n.options).each(function(r){r.selected&&(e+="&"+t.uri(n.name)+"="+t.uri(r.value))}),e):e+"&"+t.uri(n.name)+"="+t.uri(n.value)},"").slice(1)},u.prototype.siblings=function(t){return this.parent().children(t).not(this)},u.prototype.size=function(){return this.first().getBoundingClientRect()},u.prototype.slice=function(t){return t&&0!==t.length&&"string"!=typeof t&&"[object Function]"!==t.toString()?t.length?[].slice.call(t.nodes||t):[t]:[]},u.prototype.str=function(t,e){return function(n){return"function"==typeof n?n.call(this,t,e):n.toString()}},u.prototype.text=function(t){return void 0===t?this.first().textContent||"":this.each(function(e){e.textContent=t})},u.prototype.toggleClass=function(t,e){return!!e===e?this[e?"addClass":"removeClass"](t):this.eacharg(t,function(t,e){t.classList.toggle(e)})},u.prototype.trigger=function(t){var e=this.slice(arguments).slice(1);return this.eacharg(t,function(t,n){var r,o={bubbles:!0,cancelable:!0,detail:e};try{r=new window.CustomEvent(n,o)}catch(t){(r=document.createEvent("CustomEvent")).initCustomEvent(n,!0,!0,e)}t.dispatchEvent(r)})},u.prototype.unique=function(){return u(this.nodes.reduce(function(t,e){return null!=e&&!1!==e&&-1===t.indexOf(e)?t.concat(e):t},[]))},u.prototype.uri=function(t){return encodeURIComponent(t).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},u.prototype.wrap=function(t){return this.map(function(e){return u(t).each(function(t){(function(t){for(;t.firstElementChild;)t=t.firstElementChild;return u(t)})(t).append(e.cloneNode(!0)),e.parentNode.replaceChild(t,e)})})},"object"==typeof module&&module.exports&&(module.exports={u:u,ajax:ajax});